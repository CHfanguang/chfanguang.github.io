<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shadow Moon · 官网</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang SC","Microsoft YaHei";
  background:linear-gradient(135deg,#cfcfcf,#f6f6f6 30%,#bdbdbd 60%,#f0f0f0);
  color:#000;
}

/* 吸顶 LOGO 完全不动 */
.top-logo{
  position:sticky;
  top:14px;
  z-index:999;
  margin:14px auto 30px;
  width:fit-content;
  padding:14px 28px;
  background:rgba(255,255,255,.45);
  backdrop-filter:blur(30px) saturate(220%);
  -webkit-backdrop-filter:blur(30px) saturate(220%);
  border-radius:30px;
  box-shadow:inset 0 1px 1px rgba(255,255,255,.7), 0 18px 40px rgba(0,0,0,.18);
}
.logo{
  font-size:30px;
  font-weight:900;
  letter-spacing:.6px;
}
.logo span {
  text-shadow: none;
}

/* 内容动画 */
.container{
  max-width:900px;
  margin:auto;
  padding:20px 20px 140px;
  animation:iosIn .9s ease-out both;
}
@keyframes iosIn{
  from{opacity:0;transform:translateY(70px)}
  to{opacity:1;transform:translateY(0)}
}

/* iOS 液态玻璃 */
.glass{
  background:rgba(255,255,255,.45);
  backdrop-filter:blur(30px) saturate(220%);
  -webkit-backdrop-filter:blur(30px) saturate(220%);
  border-radius:28px;
  padding:30px;
  line-height:1.7;
  box-shadow:inset 0 1px 1px rgba(255,255,255,.7), 0 30px 50px rgba(0,0,0,.18);
  position: relative;
  overflow: hidden;
}

/* 科技线条装饰 */
.tech-line {
  height: 1px;
  background: linear-gradient(90deg, transparent, #00ffff, transparent);
  margin: 22px 0;
  opacity: 0.6;
}
.tech-dot {
  color: #00ffff;
  font-weight: bold;
}

.title{
  font-size:26px;
  font-weight:900;
  margin-bottom:10px;
}
.footer{
  text-align:center;
  margin:80px 0 160px;
  color:#888;
  font-size:14px;
  line-height:1.6;
}

/* 底部导航 完全不动 */
.bottom-nav{
  position:fixed;
  bottom:26px;
  left:50%;
  transform:translateX(-50%);
  width:82%;
  max-width:420px;
  background:rgba(255,255,255,.45);
  backdrop-filter:blur(30px) saturate(220%);
  -webkit-backdrop-filter:blur(30px) saturate(220%);
  border-radius:30px;
  display:flex;
  justify-content:space-evenly;
  padding:16px 0;
}
.bottom-nav a{
  text-decoration:none;
  font-weight:700;
  color:#000;
  padding: 0 8px;
}

/* 像素字体 */
.pixel-header {
  text-align: center;
  margin-bottom:30px;
  width:100%;
}
.pixel-line {
  display: block;
  font-family: 'Press Start 2P', monospace;
  font-weight:400;
  line-height:1.5;
  letter-spacing:2px;
  text-shadow: 0 0 8px currentColor, 0 0 20px currentColor, 0 0 35px currentColor;
}
.pixel-shadow {
  color: rgba(155,77,255,0.9);
  font-size:40px;
  margin-bottom:8px;
}
.pixel-ch {
  color: rgba(61,126,255,0.9);
  font-size:38px;
}
@media (max-width: 550px) {
  .pixel-shadow { font-size:30px; }
  .pixel-ch { font-size:28px; }
}

/* 彩色发光 */
.title span:not([style*="color:#000"]) {
  text-shadow: 0 0 5px currentColor,0 0 15px currentColor;
  transition: text-shadow 0.2s ease;
}
.title span[style*="color:#000"] {
  text-shadow: none;
}

.qq-tip {
  color: #888;
  font-style: italic;
  font-size:14px;
}

/* 音乐按钮 */
.music-btn {
  display: block;
  margin: 22px auto;
  padding: 12px 30px;
  background:rgba(61,126,255,0.2);
  border: 2px solid #3d7eff;
  border-radius: 18px;
  color:#000;
  font-size:16px;
  font-weight:bold;
  cursor: pointer;
  text-align: center;
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  width: fit-content;
  min-width: 180px;
}
.music-btn:hover {
  background:rgba(61,126,255,0.35);
  transform: translateY(-2px);
}
</style>
</head>
<body>

<!-- 修复要点1: audio 必须正确闭合。添加 playsinline 属性，这对移动端滑动播放非常重要！ -->
<audio id="bg-music" loop playsinline style="display:none;" src="petal_20260227_112134.mp4"></audio>

<!-- 吸顶栏 完全原样 -->
<div class="top-logo">
  <span class="logo">
    <span style="color:#4285F4;">S</span>
    <span style="color:#EA4335;">h</span>
    <span style="color:#FBBC05;">a</span>
    <span style="color:#4285F4;">d</span>
    <span style="color:#34A853;">o</span>
    <span style="color:#EA4335;">w</span>
    <span style="color:#000;"> </span>
    <span style="color:#34A853;">M</span>
    <span style="color:#4285F4;">o</span>
    <span style="color:#EA4335;">o</span>
    <span style="color:#FBBC05;">n</span>
  </span>
</div>

<div class="container">
  <div class="glass">

    <div class="pixel-header">
      <span class="pixel-line pixel-shadow">Shadow Moon</span>
      <span class="pixel-line pixel-ch">CH凡光</span>
    </div>

    <div class="title">
      <span style="color:#4285F4;">欢</span>
      <span style="color:#EA4335;">迎</span>
      <span style="color:#FBBC05;">进</span>
      <span style="color:#4285F4;">入</span>
      <span style="color:#34A853;"> </span>
      <span style="color:#EA4335;">Shadow Moon</span>
      <span style="color:#000;"> 官方网站</span>
    </div>

    <div class="tech-line"></div>

    <p><span class="tech-dot">•</span> 服务项目：<br>
    我的世界外挂 / VPN梯子 / 华为装谷歌 / 帮助制作官网 / 网页美化 / 短信代轰炸无限时长 / 技术指导 / 开全家户籍 / 户籍出道 / 手机号轰炸无限循环 / tg账号购买 / 翻墙避免被抓教程 / 翻墙必备软件 / 公安天眼查户籍 / 猎魔查户籍 / 查名下房产 / 查家庭住址 /所有商品均为1元</p>

    <button class="music-btn" id="musicToggleBtn">播放本站音乐</button>

    <p><span class="tech-dot">•</span> 咨询通道：<br>
    <a href="https://qm.qq.com/q/JYP3V4yogK" target="_blank">QQ好友</a>
    </p><div class="qq-tip">未能跳转请手动添加QQ好友：3683029258</div><p></p>

    <p><span class="tech-dot">•</span> 备用通道：
    <a href="https://qm.qq.com/q/Gq3tfhiXG8" target="_blank">备用QQ好友</a>
    </p><div class="qq-tip">未能跳转请手动添加QQ好友：3581370395</div><p></p>

    <div class="tech-line"></div>

    <p><span class="tech-dot">•</span> 客服时间：08:00–22:00（回复≤30分钟）</p>
    <p><span class="tech-dot">•</span> 所有商品：1 元</p>
    <p><span class="tech-dot">•</span> 支付方式：微信支付</p>
    <p><span class="tech-dot">•</span> 售后服务：终身免费</p>

    <div class="tech-line"></div>

    <p><span class="tech-dot">•</span> 官方QQ群：523725674</p>
    <p><span class="tech-dot">•</span> 快手账号：
    <a href="https://v.kuaishou.com/JE2u8ANT" target="_blank">快手账号</a>（我的世界CH凡光）</p>

    <div class="tech-line"></div>

    <p><b>免责声明</b><br>
    本站内容仅供学习与技术交流。<br>
    使用相关软件产生的后果由使用者自行承担。<br>
    请遵守法律法规，合法使用。<br>
    本网站/软件售卖出的商品改不退还，请慎重考虑。<br>
    本网站所有商品均为1元/不讲价/不赊账</p>

    <div class="footer">
      Powerd by Shadow Moon<br>
      © CH凡光
    </div>

  </div>
</div>

<!-- 底部导航 完全不动 -->
<div class="bottom-nav">
  <a href="index.html">主页</a>
  <a href="notice.html">通知</a>
  <a href="other.html">其他</a>
</div>

<script>
(function() {
  const audio = document.getElementById('bg-music');
  const btn = document.getElementById('musicToggleBtn');

  // 确保音频有正确的src (如果标签内未定义，这里补上)
  if (!audio.src || audio.src === window.location.href || audio.src === '') {
    audio.src = "petal_20260227_112134.mp4";
  }
  audio.volume = 0.7;

  // 播放状态标记
  let isPlaying = false;

  // 更新按钮文字
  function updateBtnText() {
    btn.textContent = isPlaying ? '暂停本站音乐' : '播放本站音乐';
  }

  // 播放函数，处理Promise
  function playMusic() {
    audio.play()
      .then(() => {
        isPlaying = true;
        updateBtnText();
      })
      .catch(error => {
        console.warn('播放失败:', error);
        // 如果是用户未交互之前自动播放被阻止，这个catch会触发，但我们是通过按钮点击调用，一般不会
        // 但如果音频格式/路径错误，提示
        alert('无法播放音乐，请检查音频文件 (petal_20260227_112134.mp4) 是否存在且格式正确。\n页面其他功能正常。');
        isPlaying = false;
        updateBtnText();
      });
  }

  // 暂停函数
  function pauseMusic() {
    audio.pause();
    isPlaying = false;
    updateBtnText();
  }

  // 切换播放/暂停
  function toggleMusic() {
    if (isPlaying) {
      pauseMusic();
    } else {
      playMusic();
    }
  }

  // 绑定点击事件
  btn.addEventListener('click', toggleMusic);

  // 监听音频错误（例如加载后中途出错）
  audio.addEventListener('error', () => {
    console.error('音频元素错误', audio.error);
    isPlaying = false;
    updateBtnText();
  });

  // 监听音频暂停（可能被浏览器内部暂停，但我们的状态需要同步）
  audio.addEventListener('pause', () => {
    // 注意：当音乐播放到结尾并且没有loop时也会触发pause，但我们用了loop属性所以不会自然结束
    // 同时也可能是被浏览器自动暂停（比如某些移动浏览器在滚动时为了节约资源暂停非播放中音频？但我们加了playsinline，应该减少此情况）
    // 但为了状态准确，检查currentTime > 0且不是我们主动暂停时？
    // 简化：只要不是我们主动通过pauseMusic暂停的，但无法区分，所以我们用isPlaying标记配合。
    // 如果isPlaying为true却触发了pause，说明被外部暂停，同步状态。
    if (isPlaying) {
      // 被外部暂停（极少数情况），更新状态
      isPlaying = false;
      updateBtnText();
    }
  });

  // 同理，play事件也可以同步状态
  audio.addEventListener('play', () => {
    // 如果play事件触发，确保isPlaying为true
    if (!isPlaying) {
      isPlaying = true;
      updateBtnText();
    }
  });

  // 初始按钮文字
  updateBtnText();

  // ** 针对滑动页面音乐终止的核心修复 **
  // 原因：部分移动浏览器在滚动时会暂停未与用户手势绑定的音频（或者因为其他优化策略）。
  // 方案1：使用playsinline（已在audio标签添加）
  // 方案2：监听页面可见性变化，如果页面隐藏时暂停没问题，但返回时恢复？我们不处理，保持原样
  // 方案3：更激进的，在滚动结束时如果音乐被意外暂停且之前是播放状态，则恢复播放。
  // 这里我们加一个保险：监听scroll事件，如果发现isPlaying为true但音频暂停了，尝试恢复。
  // 但是注意不要频繁调用play()，所以需要判断 paused 状态。
  let scrollTimeout;
  window.addEventListener('scroll', () => {
    // 如果正在播放，但音频实际暂停了（可能是浏览器滚动时强制暂停），尝试恢复
    if (isPlaying && audio.paused) {
      // 使用滚动结束后的延迟恢复，避免滚动中频繁play()
      if (scrollTimeout) clearTimeout(scrollTimeout);
      scrollTimeout = setTimeout(() => {
        // 再次检查状态：依然需要是播放状态并且暂停了
        if (isPlaying && audio.paused) {
          audio.play().catch(e => {
            // 如果恢复失败（可能用户没交互？但之前已经播放过，应该可以），忽略
            console.warn('滚动后恢复播放失败', e);
          });
        }
      }, 150); // 滚动停止150ms后尝试恢复
    }
  });

  // 另外，某些浏览器在滚动时会中止音频线程，playsinline加上保险应该足够。
  // 如果还是不行，可以在touchmove时不做处理，依然用上面的scroll防抖。
})();
</script>

</body>
</html>