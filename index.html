<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Shadow Moon Â· å®˜ç½‘</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang SC","Microsoft YaHei";
  background:linear-gradient(135deg,#cfcfcf,#f6f6f6 30%,#bdbdbd 60%,#f0f0f0);
  color:#000;
  -webkit-overflow-scrolling: touch;
}

/* å¸é¡¶ LOGO å®Œå…¨ä¸åŠ¨ */
.top-logo{
  position:sticky;
  top:14px;
  z-index:999;
  margin:14px auto 30px;
  width:fit-content;
  padding:14px 28px;
  background:rgba(255,255,255,.45);
  backdrop-filter:blur(30px) saturate(220%);
  -webkit-backdrop-filter:blur(30px) saturate(220%);
  border-radius:30px;
  box-shadow:inset 0 1px 1px rgba(255,255,255,.7), 0 18px 40px rgba(0,0,0,.18);
}
.logo{
  font-size:30px;
  font-weight:900;
  letter-spacing:.6px;
}
.logo span {
  text-shadow: none;
}

/* å†…å®¹åŠ¨ç”» */
.container{
  max-width:900px;
  margin:auto;
  padding:20px 20px 140px;
  animation:iosIn .9s ease-out both;
}
@keyframes iosIn{
  from{opacity:0;transform:translateY(70px)}
  to{opacity:1;transform:translateY(0)}
}

/* iOS æ¶²æ€ç»ç’ƒ */
.glass{
  background:rgba(255,255,255,.45);
  backdrop-filter:blur(30px) saturate(220%);
  -webkit-backdrop-filter:blur(30px) saturate(220%);
  border-radius:28px;
  padding:30px;
  line-height:1.7;
  box-shadow:inset 0 1px 1px rgba(255,255,255,.7), 0 30px 50px rgba(0,0,0,.18);
  position: relative;
  overflow: hidden;
}

/* ç§‘æŠ€çº¿æ¡è£…é¥° */
.tech-line {
  height: 1px;
  background: linear-gradient(90deg, transparent, #00ffff, transparent);
  margin: 22px 0;
  opacity: 0.6;
}
.tech-dot {
  color: #00ffff;
  font-weight: bold;
}

.title{
  font-size:26px;
  font-weight:900;
  margin-bottom:10px;
}
.footer{
  text-align:center;
  margin:80px 0 160px;
  color:#888;
  font-size:14px;
  line-height:1.6;
}

/* åº•éƒ¨å¯¼èˆª å®Œå…¨ä¸åŠ¨ */
.bottom-nav{
  position:fixed;
  bottom:26px;
  left:50%;
  transform:translateX(-50%);
  width:82%;
  max-width:420px;
  background:rgba(255,255,255,.45);
  backdrop-filter:blur(30px) saturate(220%);
  -webkit-backdrop-filter:blur(30px) saturate(220%);
  border-radius:30px;
  display:flex;
  justify-content:space-evenly;
  padding:16px 0;
  z-index:1000;
}
.bottom-nav a{
  text-decoration:none;
  font-weight:700;
  color:#000;
  padding: 0 8px;
}

/* åƒç´ å­—ä½“ */
.pixel-header {
  text-align: center;
  margin-bottom:30px;
  width:100%;
}
.pixel-line {
  display: block;
  font-family: 'Press Start 2P', monospace;
  font-weight:400;
  line-height:1.5;
  letter-spacing:2px;
  text-shadow: 0 0 8px currentColor, 0 0 20px currentColor, 0 0 35px currentColor;
}
.pixel-shadow {
  color: rgba(155,77,255,0.9);
  font-size:40px;
  margin-bottom:8px;
}
.pixel-ch {
  color: rgba(61,126,255,0.9);
  font-size:38px;
}
@media (max-width: 550px) {
  .pixel-shadow { font-size:30px; }
  .pixel-ch { font-size:28px; }
}

/* å½©è‰²å‘å…‰ */
.title span:not([style*="color:#000"]) {
  text-shadow: 0 0 5px currentColor,0 0 15px currentColor;
  transition: text-shadow 0.2s ease;
}
.title span[style*="color:#000"] {
  text-shadow: none;
}

.qq-tip {
  color: #888;
  font-style: italic;
  font-size:14px;
}

/* æŒ‰é’®é€šç”¨æ ·å¼ - ç”¨äºéŸ³ä¹æŒ‰é’®å’Œæ¼”ç¤ºæŒ‰é’® */
.custom-btn {
  display: block;
  margin: 22px auto;
  padding: 12px 30px;
  background:rgba(61,126,255,0.2);
  border: 2px solid #3d7eff;
  border-radius: 18px;
  color:#000;
  font-size:16px;
  font-weight:bold;
  cursor: pointer;
  text-align: center;
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  width: fit-content;
  min-width: 180px;
  -webkit-tap-highlight-color: transparent;
  text-decoration: none; /* å¯¹äºé“¾æ¥æŒ‰é’® */
}
.custom-btn:hover {
  background:rgba(61,126,255,0.35);
  transform: translateY(-2px);
}
.custom-btn.playing {
  background:rgba(0,255,0,0.15);
  border-color: #00ffaa;
  box-shadow: 0 0 15px rgba(0,255,0,0.3);
}

/* ä¸ºäº†ä¿æŒåŸæœ‰éŸ³ä¹æŒ‰é’®çš„ç‹¬ç«‹æ ·å¼ï¼ŒåŒæ—¶å…±äº«å¤–è§‚ */
.music-btn {
  /* ç»§æ‰¿ .custom-btn æ ·å¼ï¼Œä½†ä¿ç•™ playing ç±» */
}

/* æ¼”ç¤ºæŒ‰é’®ä¸éœ€è¦ playing çŠ¶æ€ï¼Œä½†ä¿æŒç›¸åŒåŸºç¡€æ ·å¼ */
.demo-btn {
  /* å®Œå…¨ç»§æ‰¿ custom-btn */
}
</style>
</head>
<body>

<!-- éŸ³é¢‘å…ƒç´  -->
<audio id="bg-music" preload="auto" loop playsinline style="display:none;" src="petal_20260227_112134.mp4"></audio>

<!-- å¸é¡¶æ  -->
<div class="top-logo">
  <span class="logo">
    <span style="color:#4285F4;">S</span><span style="color:#EA4335;">h</span><span style="color:#FBBC05;">a</span><span style="color:#4285F4;">d</span><span style="color:#34A853;">o</span><span style="color:#EA4335;">w</span><span style="color:#000;"> </span><span style="color:#34A853;">M</span><span style="color:#4285F4;">o</span><span style="color:#EA4335;">o</span><span style="color:#FBBC05;">n</span>
  </span>
</div>

<div class="container">
  <div class="glass">
    <div class="pixel-header">
      <span class="pixel-line pixel-shadow">Shadow Moon</span>
      <span class="pixel-line pixel-ch">CHå‡¡å…‰</span>
    </div>
    <div class="title">
      <span style="color:#4285F4;">æ¬¢</span><span style="color:#EA4335;">è¿</span><span style="color:#FBBC05;">è¿›</span><span style="color:#4285F4;">å…¥</span><span style="color:#34A853;"> </span><span style="color:#EA4335;">Shadow Moon</span><span style="color:#000;"> å®˜æ–¹ç½‘ç«™</span>
    </div>
    <div class="tech-line"></div>
    <p><span class="tech-dot">â€¢</span> æœåŠ¡é¡¹ç›®ï¼š<br>æˆ‘çš„ä¸–ç•Œå¤–æŒ‚ / VPNç¿»å¢™ / åä¸ºè£…è°·æ­Œ / å¸®åŠ©åˆ¶ä½œå®˜ç½‘ / ç½‘é¡µç¾åŒ– / çŸ­ä¿¡ä»£è½°ç‚¸æ— é™æ—¶é•¿ / æŠ€æœ¯æŒ‡å¯¼ / å¼€å…¨å®¶æˆ·ç± / æˆ·ç±å‡ºé“ / æ‰‹æœºå·è½°ç‚¸æ— é™å¾ªç¯ / tgé£æœºè´¦å·è´­ä¹° / ç¿»å¢™é¿å…è¢«æŠ“æ•™ç¨‹ / ç¿»å¢™å¿…å¤‡è½¯ä»¶ / å…¬å®‰å¤©çœ¼æŸ¥æˆ·ç± / çŒé­”æŸ¥æˆ·ç± / æŸ¥åä¸‹æˆ¿äº§ / æŸ¥å®¶åº­ä½å€ /æ‰€æœ‰å•†å“å‡ä¸º1å…ƒ</p>
    
    <!-- éŸ³ä¹æ’­æ”¾æŒ‰é’® -->
    <button class="custom-btn music-btn" id="musicToggleBtn">æ’­æ”¾æœ¬ç«™éŸ³ä¹</button>
    
    <!-- æ–°å¢ï¼šæ¼”ç¤ºæ¨¡å¼æŒ‰é’® (ä¸æ’­æ”¾æŒ‰é’®ç›¸åŒæ ·å¼ï¼Œç‚¹å‡»è·³è½¬act.html) -->
    <a href="act.html" class="custom-btn demo-btn" id="demoBtn">è¿›å…¥æ¼”ç¤ºæ¨¡å¼</a>
    
    <p><span class="tech-dot">â€¢</span> å’¨è¯¢é€šé“ï¼š<br><a href="https://qm.qq.com/q/JYP3V4yogK" target="_blank">QQå¥½å‹</a></p><div class="qq-tip">æœªèƒ½è·³è½¬è¯·æ‰‹åŠ¨æ·»åŠ QQå¥½å‹ï¼š3683029258</div>
    <p><span class="tech-dot">â€¢</span> å¤‡ç”¨é€šé“ï¼š<a href="https://qm.qq.com/q/Gq3tfhiXG8" target="_blank">å¤‡ç”¨QQå¥½å‹</a></p><div class="qq-tip">æœªèƒ½è·³è½¬è¯·æ‰‹åŠ¨æ·»åŠ QQå¥½å‹ï¼š3581370395</div>
    <div class="tech-line"></div>
    <p><span class="tech-dot">â€¢</span> å®¢æœæ—¶é—´ï¼š08:00â€“22:00ï¼ˆå›å¤â‰¤30åˆ†é’Ÿï¼‰</p>
    <p><span class="tech-dot">â€¢</span> æ‰€æœ‰å•†å“ï¼š1 å…ƒ</p>
    <p><span class="tech-dot">â€¢</span> æ”¯ä»˜æ–¹å¼ï¼šå¾®ä¿¡æ”¯ä»˜</p>
    <p><span class="tech-dot">â€¢</span> å”®åæœåŠ¡ï¼šç»ˆèº«å…è´¹</p>
    <div class="tech-line"></div>
    <p><span class="tech-dot">â€¢</span> å®˜æ–¹QQç¾¤ï¼š523725674</p>
    <p><span class="tech-dot">â€¢</span> å¿«æ‰‹è´¦å·ï¼š<a href="https://v.kuaishou.com/JE2u8ANT" target="_blank">å¿«æ‰‹è´¦å·</a>ï¼ˆæˆ‘çš„ä¸–ç•ŒCHå‡¡å…‰ï¼‰</p>
    <div class="tech-line"></div>
    <p><b>å…è´£å£°æ˜</b><br>æœ¬ç«™å†…å®¹ä»…ä¾›å­¦ä¹ ä¸æŠ€æœ¯äº¤æµã€‚<br>ä½¿ç”¨ç›¸å…³è½¯ä»¶äº§ç”Ÿçš„åæœç”±ä½¿ç”¨è€…è‡ªè¡Œæ‰¿æ‹…ã€‚<br>è¯·éµå®ˆæ³•å¾‹æ³•è§„ï¼Œåˆæ³•ä½¿ç”¨ã€‚<br>æœ¬ç½‘ç«™/è½¯ä»¶å”®å–å‡ºçš„å•†å“æ”¹ä¸é€€è¿˜ï¼Œè¯·æ…é‡è€ƒè™‘ã€‚<br>æœ¬ç½‘ç«™æ‰€æœ‰å•†å“å‡ä¸º1å…ƒ/ä¸è®²ä»·/ä¸èµŠè´¦</p>
    <div class="footer">Powerd by Shadow Moon<br>Â© CHå‡¡å…‰</div>
  </div>
</div>

<!-- åº•éƒ¨å¯¼èˆª -->
<div class="bottom-nav">
  <a href="index.html">ä¸»é¡µ</a>
  <a href="notice.html">é€šçŸ¥</a>
  <a href="other.html">å…¶ä»–</a>
</div>

<script>
(function() {
  // --------------------------------------------------------------
  // è¶…é«˜é¢‘å¿ƒè·³ Â· 60æ¬¡/ç§’ (åˆ©ç”¨ requestAnimationFrame)
  // --------------------------------------------------------------
  const audioElem = document.getElementById('bg-music');
  const btn = document.getElementById('musicToggleBtn');
  // æ¼”ç¤ºæŒ‰é’®ä¸éœ€è¦JSæ§åˆ¶ï¼Œç›´æ¥ä½¿ç”¨<a>æ ‡ç­¾è·³è½¬

  const AUDIO_URL = "petal_20260227_112134.mp4";
  if (!audioElem.src || audioElem.src === window.location.href) {
    audioElem.src = AUDIO_URL;
  }

  let isPlaying = false;
  let rafId = null;           // requestAnimationFrame ID
  let lastCheck = 0;          // ç”¨äºæ§åˆ¶å®é™…æ£€æŸ¥é¢‘ç‡
  
  // UIæ›´æ–°
  function setUIPlaying(playing) {
    if (playing) {
      btn.classList.add('playing');
      btn.textContent = 'æš‚åœæœ¬ç«™éŸ³ä¹';
    } else {
      btn.classList.remove('playing');
      btn.textContent = 'æ’­æ”¾æœ¬ç«™éŸ³ä¹';
    }
  }

  // å¿ƒè·³æ£€æŸ¥å‡½æ•° (ç”± requestAnimationFrame é©±åŠ¨)
  function heartbeat() {
    if (isPlaying) {
      // å¦‚æœæœŸæœ›æ’­æ”¾ä½†éŸ³é¢‘æš‚åœäº†
      if (audioElem.paused) {
        console.log('â¤ï¸â€ğŸ”¥ æ£€æµ‹åˆ°æš‚åœï¼Œç«‹å³æ¢å¤', new Date().toISOString());
        audioElem.play().catch(e => console.warn('æ¢å¤å¤±è´¥', e));
      }
      
      // é¢å¤–æªæ–½ï¼šåˆ›å»ºä¸€ä¸ªæçŸ­çš„ç©ºéŸ³é¢‘ï¼Œåˆºæ¿€éŸ³é¢‘ç³»ç»Ÿä¿æŒæ´»è·ƒ
      const now = performance.now();
      if (now - lastCheck > 200) { // æ¯200msæ¿€æ´»ä¸€æ¬¡ç©ºéŸ³é¢‘
        lastCheck = now;
        const silentAudio = new Audio();
        silentAudio.volume = 0.01;
        silentAudio.src = 'data:audio/wav;base64,UklGRlwAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YVgAAAB/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f38=';
        silentAudio.play().catch(e => {}).then(() => {
          setTimeout(() => { silentAudio.pause(); silentAudio.src = ''; }, 30);
        });
      }
    }
    
    // ç»§ç»­ä¸‹ä¸€å¸§æ£€æŸ¥
    rafId = requestAnimationFrame(heartbeat);
  }

  // å¯åŠ¨å¿ƒè·³
  function startHeartbeat() {
    if (rafId) cancelAnimationFrame(rafId);
    rafId = requestAnimationFrame(heartbeat);
  }

  function stopHeartbeat() {
    if (rafId) {
      cancelAnimationFrame(rafId);
      rafId = null;
    }
  }

  // æ’­æ”¾å‡½æ•°
  function playMusic() {
    audioElem.play()
      .then(() => {
        isPlaying = true;
        setUIPlaying(true);
        startHeartbeat();
      })
      .catch(e => {
        console.error('æ’­æ”¾å¤±è´¥', e);
        alert('æ— æ³•æ’­æ”¾éŸ³ä¹ï¼Œè¯·æ£€æŸ¥éŸ³é¢‘æ–‡ä»¶ã€‚');
        isPlaying = false;
        setUIPlaying(false);
      });
  }

  function pauseMusic() {
    audioElem.pause();
    isPlaying = false;
    setUIPlaying(false);
    stopHeartbeat();
  }

  // åˆ‡æ¢
  function toggleMusic() {
    if (isPlaying) {
      pauseMusic();
    } else {
      playMusic();
    }
  }

  // äº‹ä»¶ç›‘å¬ï¼šé¡µé¢å¯è§æ€§æ¢å¤
  document.addEventListener('visibilitychange', () => {
    if (!document.hidden && isPlaying && audioElem.paused) {
      audioElem.play().catch(e => {});
    }
  });

  // æ»šåŠ¨æ¢å¤
  let scrollTimer;
  window.addEventListener('scroll', () => {
    if (isPlaying && audioElem.paused) {
      if (scrollTimer) clearTimeout(scrollTimer);
      scrollTimer = setTimeout(() => {
        if (isPlaying && audioElem.paused) {
          audioElem.play().catch(e => {});
        }
      }, 100);
    }
  });

  // é¢„åŠ è½½
  audioElem.load();

  // é”™è¯¯æ¢å¤
  audioElem.addEventListener('error', () => {
    if (isPlaying) {
      audioElem.src = AUDIO_URL;
      audioElem.load();
      setTimeout(() => {
        if (isPlaying) audioElem.play().catch(e => {});
      }, 100);
    }
  });

  // ç»‘å®šæŒ‰é’®
  btn.addEventListener('click', toggleMusic);
  setUIPlaying(false);
})();
</script>
</body>
</html>